<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script src="https://kit.fontawesome.com/69e571abd7.js" crossorigin="anonymous"></script>
    <title>Mini Linkio</title>
  </head>

  <body>
    <div class="my-4 px-4 container-fluid">
      <h1 class="mb-4 text-center">Mini Linkio</h1>
      <form
        action="/url"
        method="POST"
        class="row g-3 justify-content-center align-items-center"
      >
        <div class="col-sm-8">
          <label for="fullUrl" class="visually-hidden">URL</label>
          <input
            required
            type="url"
            name="fullUrl"
            id="fullUrl"
            placeholder="URL"
            class="form-control"
          />
        </div>
        <div class="col-sm-4">
          <button type="submit" class="btn btn-success w-100 fw-bold fs-5">Recortar</button>
        </div>
      </form>

      <div class="table-responsive">
        <table class="table table-striped my-4">
            <thead>
            <tr>
                <th>URL</th>
                <th>URL mini</th>
                <th>Clicks</th>
            </tr>
            </thead>
            <tbody>
            <% shortUrls.forEach(shortUrl => { %>
            <tr class="align-middle">
                <td>
                <a class="link-light" href="<%= shortUrl.redirectURL %>"
                    ><%= shortUrl.redirectURL %></a
                </td>
                <td id="shortLink">
                    <!-- TODO: Add link to shorten URL -->
                    <a class="link-success" href="https://minilinkio.cyclic.app/url/<%= shortUrl.shortId %>"><%= shortUrl.shortId %></a>
                </td>
                <td class="text-success"><%= shortUrl.visitHistory.length %></td>
            </tr>
            <% }) %>
            </tbody>
        </table>
      </div>

      <footer class="fixed-bottom py-2 px-4 text-center">
        <a href="https://github.com/LaVieja1" class="link-light text-decoration-none">Santiago Cano 2023 <i class="fa-brands fa-github"></i></a>
      </footer>
    </div>
  </body>
</html>
